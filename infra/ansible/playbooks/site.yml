---
# ==============================================================================
# Master Playbook: Site Provisioning (Rev 0.3.6)
# ==============================================================================

- name: "[sensors] Configure Sensor Nodes"
  hosts: sensors
  become: true
  gather_facts: true # Required for "Smart Pi 3" detection

  roles:
    # 1. System & Network (The Base)
    - role: common
    - role: zerotier

    # 2. Hardware Drivers (Must come before consumers!)
    - role: gnss-receiver

    # 3. Time Synchronization (Needs GPSD)
    - role: strat1_timing

    # 4. Applications (Docker)
    - role: sensor_node

    # 5. Data Logging (Depends on everything above)
    - role: recorder

