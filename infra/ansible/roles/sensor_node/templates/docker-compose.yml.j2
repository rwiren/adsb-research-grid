version: '3.8'

services:
  readsb:
    image: ghcr.io/sdr-enthusiasts/docker-readsb-protobuf:latest
    container_name: readsb
    restart: always
    tty: true
    devices:
      - /dev/bus/usb:/dev/bus/usb
    ports:
      - "8080:8080"
      - "30005:30005"
    environment:
      - TZ={{ timezone }}
      - READSB_DEVICE_TYPE=rtlsdr
      # CORRECTED VARIABLE: This container requires '_ENABLE' to add the --net flag
      - READSB_NET_ENABLE=true
      - READSB_DCFILTER=true
      - READSB_FIX=true
      - READSB_GAIN={{ adsb_gain }}
      - READSB_LAT=60.319555
      - READSB_LON=24.830816
      - READSB_ALT=100
    tmpfs:
      - /run/readsb
      - /var/log
