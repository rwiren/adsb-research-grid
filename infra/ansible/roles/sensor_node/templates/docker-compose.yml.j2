version: '3.8'

services:
  readsb:
    image: ghcr.io/sdr-enthusiasts/docker-readsb-protobuf:latest
    container_name: readsb
    restart: always
    tty: true
    devices:
      - /dev/bus/usb:/dev/bus/usb
    ports:
      - "8080:8080"     # Web Interface
      - "30005:30005"   # Raw Data (Beast)
    environment:
      - TZ={{ timezone }}
      - READSB_DEVICE_TYPE=rtlsdr
      - READSB_DCFILTER=true
      - READSB_FIX=true
      # This connects the template to your group_vars!
      - READSB_GAIN={{ adsb_gain }}
      - READSB_LAT=60.319555
      - READSB_LON=24.830816
      - READSB_ALT=100
    # tmpfs saves your 32GB SD card by writing logs/temp data to RAM
    tmpfs:
      - /run/readsb
      - /var/log
